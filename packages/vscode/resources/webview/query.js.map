{"version":3,"file":"query.js","sources":["../../../../src/platform/vscode/components/QueryPanel.vue","../../../../src/platform/vscode/entry/query.ts"],"sourcesContent":["<template>\r\n  <div class=\"query-panel\">\r\n    <div class=\"query-toolbar\">\r\n      <select v-model=\"selectedConnectionId\" class=\"query-selector\" @change=\"handleConnectionChange\">\r\n        <option value=\"\">ÈÄâÊã©Êï∞ÊçÆÂ∫ìËøûÊé•</option>\r\n        <option v-for=\"conn in connections\" :key=\"conn.id\" :value=\"conn.id\">\r\n          {{ conn.name }} ({{ conn.host }}:{{ conn.port }})\r\n        </option>\r\n      </select>\r\n      <button @click=\"executeQuery\" class=\"btn btn-primary\">\r\n        ÊâßË°å (Ctrl+Enter)\r\n      </button>\r\n      <button @click=\"clearQuery\" class=\"btn btn-secondary\">\r\n        Ê∏ÖÁ©∫\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"query-editor\">\r\n      <textarea\r\n        ref=\"queryTextarea\"\r\n        v-model=\"queryText\"\r\n        class=\"query-textarea\"\r\n        placeholder=\"Âú®Ê≠§ËæìÂÖ• SQL Êü•ËØ¢ËØ≠Âè•...&#10;&#10;‰æãÂ¶Ç: SELECT * FROM users LIMIT 100\"\r\n        @keydown=\"handleKeydown\"\r\n      ></textarea>\r\n    </div>\r\n\r\n    <div class=\"query-results\">\r\n      <div v-if=\"loading\" class=\"loading-state\">\r\n        <div class=\"spinner\"></div>\r\n        <span>ÊâßË°å‰∏≠...</span>\r\n      </div>\r\n      <div v-else-if=\"queryResults\" class=\"results\">\r\n        <div class=\"results-header\">\r\n          <div class=\"results-title\">Êü•ËØ¢ÁªìÊûú</div>\r\n          <div class=\"results-meta\">\r\n            {{ queryResults.rowCount }} Ë°å ¬∑ {{ queryResults.executionTime }}ms\r\n          </div>\r\n        </div>\r\n\r\n        <table class=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th v-for=\"col in queryResults.columns\" :key=\"col\">{{ col }}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(row, index) in queryResults.rows\" :key=\"index\">\r\n              <td v-for=\"(cell, cellIndex) in row\" :key=\"cellIndex\">\r\n                {{ formatCell(cell) }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div v-else class=\"empty-state\">\r\n        <div class=\"empty-icon\">üìä</div>\r\n        <div class=\"empty-text\">ÊâßË°åÊü•ËØ¢ÂêéÔºåÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"status-bar\">\r\n      <div class=\"status-item\">\r\n        <span class=\"status-icon\">üîó</span>\r\n        <span>{{ selectedConnection?.name || 'Êú™ÈÄâÊã©ËøûÊé•' }}</span>\r\n      </div>\r\n      <div class=\"status-item\">\r\n        <span id=\"statusTime\">{{ queryResults ? `ÊâßË°åÊó∂Èó¥: ${queryResults.executionTime}ms` : '' }}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, computed, onMounted } from 'vue';\r\nimport { getVSCodeBridge } from '../bridge';\r\n\r\nconst vscode = getVSCodeBridge();\r\n\r\nconst connections = ref<any[]>([]);\r\nconst selectedConnectionId = ref('');\r\nconst queryText = ref('');\r\nconst queryResults = ref<any>(null);\r\nconst loading = ref(false);\r\nconst queryTextarea = ref<HTMLTextAreaElement | null>(null);\r\n\r\nconst selectedConnection = computed(() => {\r\n  return connections.value.find(c => c.id === selectedConnectionId.value);\r\n});\r\n\r\nonMounted(() => {\r\n  // ËØ∑Ê±ÇËøûÊé•ÂàóË°®\r\n  vscode.postMessage({ command: 'getConnections' });\r\n\r\n  // ÁõëÂê¨Êù•Ëá™Êâ©Â±ïÁöÑÊ∂àÊÅØ\r\n  vscode.onMessage((message: any) => {\r\n    if (message.command === 'connections') {\r\n      connections.value = message.data;\r\n    } else if (message.command === 'queryResult') {\r\n      displayQueryResult(message.data);\r\n    } else if (message.command === 'error') {\r\n      handleError(message.data);\r\n    }\r\n  });\r\n});\r\n\r\nfunction handleConnectionChange() {\r\n  // ËøûÊé•ÂèòÂåñÊó∂ÁöÑÂ§ÑÁêÜ\r\n}\r\n\r\nfunction handleKeydown(e: KeyboardEvent) {\r\n  // Ctrl+Enter Êàñ Cmd+Enter ÊâßË°åÊü•ËØ¢\r\n  if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {\r\n    e.preventDefault();\r\n    executeQuery();\r\n  }\r\n\r\n  // Tab ÈîÆÊèíÂÖ•2‰∏™Á©∫Ê†º\r\n  if (e.key === 'Tab') {\r\n    e.preventDefault();\r\n    const textarea = queryTextarea.value;\r\n    if (textarea) {\r\n      const start = textarea.selectionStart;\r\n      const end = textarea.selectionEnd;\r\n      queryText.value = queryText.value.substring(0, start) + '  ' + queryText.value.substring(end);\r\n      textarea.selectionStart = textarea.selectionEnd = start + 2;\r\n    }\r\n  }\r\n}\r\n\r\nfunction executeQuery() {\r\n  if (!selectedConnectionId.value) {\r\n    alert('ËØ∑ÂÖàÈÄâÊã©Êï∞ÊçÆÂ∫ìËøûÊé•');\r\n    return;\r\n  }\r\n\r\n  if (!queryText.value.trim()) {\r\n    alert('ËØ∑ËæìÂÖ• SQL Êü•ËØ¢ËØ≠Âè•');\r\n    return;\r\n  }\r\n\r\n  loading.value = true;\r\n\r\n  vscode.postMessage({\r\n    command: 'executeQuery',\r\n    data: {\r\n      connectionId: selectedConnectionId.value,\r\n      sql: queryText.value\r\n    }\r\n  });\r\n}\r\n\r\nfunction clearQuery() {\r\n  queryText.value = '';\r\n  queryResults.value = null;\r\n}\r\n\r\nfunction displayQueryResult(data: any) {\r\n  queryResults.value = data;\r\n  loading.value = false;\r\n}\r\n\r\nfunction handleError(error: string) {\r\n  loading.value = false;\r\n  alert(`Êü•ËØ¢ÈîôËØØ: ${error}`);\r\n}\r\n\r\nfunction formatCell(cell: any) {\r\n  if (cell === null || cell === undefined) {\r\n    return 'NULL';\r\n  }\r\n  if (typeof cell === 'boolean') {\r\n    return cell ? '‚úì' : '‚úó';\r\n  }\r\n  if (typeof cell === 'object') {\r\n    return JSON.stringify(cell);\r\n  }\r\n  return String(cell);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.query-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.query-toolbar {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  background-color: var(--vscode-editorGroupHeader-tabsBackground);\r\n  border-bottom: 1px solid var(--vscode-panel-border);\r\n}\r\n\r\n.query-selector {\r\n  min-width: 200px;\r\n  padding: 6px 10px;\r\n  border: 1px solid var(--vscode-input-border);\r\n  background-color: var(--vscode-input-background);\r\n  color: var(--vscode-input-foreground);\r\n  border-radius: 4px;\r\n}\r\n\r\n.btn {\r\n  padding: 6px 14px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 13px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: var(--vscode-button-background);\r\n  color: var(--vscode-button-foreground);\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: var(--vscode-button-hoverBackground);\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: var(--vscode-button-secondaryBackground);\r\n  color: var(--vscode-button-secondaryForeground);\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: var(--vscode-button-secondaryHoverBackground);\r\n}\r\n\r\n.query-editor {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-bottom: 1px solid var(--vscode-panel-border);\r\n  min-height: 200px;\r\n}\r\n\r\n.query-textarea {\r\n  flex: 1;\r\n  padding: 16px;\r\n  font-family: var(--vscode-editor-font-family, 'Consolas', 'Monaco', monospace);\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  border: none;\r\n  resize: none;\r\n  background-color: var(--vscode-editor-background);\r\n  color: var(--vscode-editor-foreground);\r\n}\r\n\r\n.query-textarea:focus {\r\n  outline: none;\r\n}\r\n\r\n.query-results {\r\n  flex: 1;\r\n  overflow: auto;\r\n  padding: 12px;\r\n}\r\n\r\n.loading-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px;\r\n  gap: 12px;\r\n}\r\n\r\n.spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid var(--vscode-progressBar-background);\r\n  border-top-color: var(--vscode-progressBar-foreground);\r\n  border-radius: 50%;\r\n  animation: spin 0.6s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.results-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n  padding: 8px 12px;\r\n  background-color: var(--vscode-editorGroupHeader-tabsBackground);\r\n  border-radius: 4px;\r\n}\r\n\r\n.results-title {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n}\r\n\r\n.results-meta {\r\n  font-size: 12px;\r\n  color: var(--vscode-descriptionForeground);\r\n}\r\n\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 13px;\r\n}\r\n\r\n.data-table th,\r\n.data-table td {\r\n  padding: 8px 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid var(--vscode-panel-border);\r\n}\r\n\r\n.data-table th {\r\n  background-color: var(--vscode-editorGroupHeader-tabsBackground);\r\n  font-weight: 600;\r\n  position: sticky;\r\n  top: 0;\r\n}\r\n\r\n.data-table tbody tr:hover {\r\n  background-color: var(--vscode-list-hoverBackground);\r\n}\r\n\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60px 20px;\r\n  text-align: center;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n  opacity: 0.5;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 14px;\r\n  color: var(--vscode-descriptionForeground);\r\n}\r\n\r\n.status-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 8px 12px;\r\n  background-color: var(--vscode-statusBar-background);\r\n  color: var(--vscode-statusBar-foreground);\r\n  font-size: 12px;\r\n}\r\n\r\n.status-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.status-icon {\r\n  color: var(--vscode-textLink-foreground);\r\n}\r\n</style>\r\n","/**\r\n * VSCode WebView - Query Entry Point\r\n * SQL Êü•ËØ¢Èù¢ÊùøÂÖ•Âè£\r\n */\r\n\r\nimport { createApp } from 'vue';\r\nimport QueryPanel from '../components/QueryPanel.vue';\r\n\r\n// ÂàõÂª∫ Vue Â∫îÁî®\r\nconst app = createApp(QueryPanel);\r\n\r\n// ÊåÇËΩΩ\r\napp.mount('#app');\r\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_Fragment","_renderList","_toDisplayString"],"mappings":"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"}