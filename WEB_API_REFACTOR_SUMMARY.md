# Webç«¯APIé‡æ„æ€»ç»“

## ğŸ¯ ä»»åŠ¡ç›®æ ‡
å°†Webç«¯çš„æ¥å£è°ƒç”¨ä»ç»„ä»¶ä¸­çš„fetchè¯·æ±‚ç»Ÿä¸€å°è£…åˆ°serviceå±‚ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ£€æŸ¥å’Œè¯†åˆ«ç°æœ‰çš„fetchè¯·æ±‚
- åœ¨ `table-editor.vue` ä¸­å‘ç° 3 ä¸ªfetchè°ƒç”¨
- åœ¨ `table-detail.vue` ä¸­å‘ç° 2 ä¸ªfetchè°ƒç”¨  
- åœ¨ `data-editor.vue` ä¸­å‘ç° 2 ä¸ªfetchè°ƒç”¨
- åœ¨ `db-tools.vue` ä¸­å‘ç° 1 ä¸ªfetchè°ƒç”¨

### 2. å®Œå–„DatabaseService APIå°è£…
æ–°å¢ä»¥ä¸‹APIæ–¹æ³•ï¼š

#### è¡¨ç»“æ„ç®¡ç†
- `saveTableStructure()` - ä¿å­˜è¡¨ç»“æ„ï¼ˆæ–°å»ºè¡¨ï¼‰
- `alterTable()` - ä¿®æ”¹è¡¨ç»“æ„

#### æ•°æ®æ“ä½œ
- `insertData()` - æ’å…¥æ•°æ®
- `updateData()` - æ›´æ–°æ•°æ®  
- `deleteData()` - åˆ é™¤æ•°æ®

#### è¡¨ç®¡ç†
- `truncateTable()` - æˆªæ–­è¡¨
- `dropTable()` - åˆ é™¤è¡¨

#### æ•°æ®åº“ç®¡ç†
- `backupDatabase()` - æ•°æ®åº“å¤‡ä»½
- `restoreDatabase()` - æ¢å¤æ•°æ®åº“
- `getDatabaseStats()` - è·å–ç»Ÿè®¡ä¿¡æ¯
- `optimizeDatabase()` - ä¼˜åŒ–æ•°æ®åº“
- `checkDatabaseHealth()` - æ£€æŸ¥å¥åº·çŠ¶æ€

### 3. é‡æ„ç»„ä»¶ä½¿ç”¨DatabaseService

#### table-editor.vue
- âœ… å¯¼å…¥DatabaseService
- âœ… æ›¿æ¢ `loadTableStructure()` ä¸­çš„fetch
- âœ… æ›¿æ¢ `saveTable()` ä¸­çš„fetch
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå‚æ•°ä¼ é€’

#### data-editor.vue  
- âœ… å¯¼å…¥DatabaseService
- âœ… æ›¿æ¢ `handleSubmit()` ä¸­çš„fetch
- âœ… ç»Ÿä¸€æ’å…¥å’Œæ›´æ–°æ•°æ®çš„APIè°ƒç”¨

#### table-detail.vue
- âœ… å¯¼å…¥DatabaseService
- âœ… æ›¿æ¢ `insertData()` ä¸­çš„fetch
- âœ… ä½¿ç”¨ç»Ÿä¸€çš„executeQueryæ–¹æ³•

#### db-tools.vue
- âœ… å¯¼å…¥DatabaseService  
- âœ… æ›¿æ¢ `performRestore()` ä¸­çš„fetch
- âœ… ä½¿ç”¨ç»Ÿä¸€çš„restoreDatabaseæ–¹æ³•

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### APIå°è£…åŸåˆ™
1. **ç»Ÿä¸€é”™è¯¯å¤„ç†** - æ‰€æœ‰APIé€šè¿‡try-catchå¤„ç†å¼‚å¸¸
2. **ç±»å‹å®‰å…¨** - ä½¿ç”¨TypeScriptå®šä¹‰å‚æ•°å’Œè¿”å›å€¼ç±»å‹
3. **å‚æ•°éªŒè¯** - åœ¨serviceå±‚è¿›è¡ŒåŸºç¡€å‚æ•°æ ¡éªŒ
4. **å“åº”æ ¼å¼** - ç»Ÿä¸€APIå“åº”æ ¼å¼å¤„ç†

### é‡æ„æ¨¡å¼
```typescript
// é‡æ„å‰ï¼ˆç»„ä»¶å†…fetchï¼‰
const response = await fetch(`/api/database/saveTableStructure/${connectionId}`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
});

// é‡æ„åï¼ˆä½¿ç”¨serviceï¼‰
const result = await databaseService.saveTableStructure(connectionId, database, table, columns);
```

## ğŸ“Š é‡æ„æ•ˆæœ

### ä»£ç è´¨é‡æå‡
- **å‡å°‘é‡å¤ä»£ç ** - ç»Ÿä¸€çš„APIè°ƒç”¨é€»è¾‘
- **æé«˜å¯ç»´æŠ¤æ€§** - APIå˜æ›´åªéœ€ä¿®æ”¹serviceå±‚
- **å¢å¼ºç±»å‹å®‰å…¨** - TypeScriptç±»å‹æ£€æŸ¥
- **ç»Ÿä¸€é”™è¯¯å¤„ç†** - æ ‡å‡†åŒ–çš„å¼‚å¸¸å¤„ç†

### ç»„ä»¶ç®€åŒ–
- **table-editor.vue** - å‡å°‘äº†fetchç›¸å…³çš„æ ·æ¿ä»£ç 
- **data-editor.vue** - æ•°æ®æ“ä½œé€»è¾‘æ›´æ¸…æ™°
- **table-detail.vue** - SQLæ‰§è¡Œé€»è¾‘ç»Ÿä¸€
- **db-tools.vue** - æ•°æ®åº“ç®¡ç†åŠŸèƒ½æ ‡å‡†åŒ–

## ğŸ‰ éªŒè¯ç»“æœ

### æ„å»ºæµ‹è¯•
- âœ… TypeScriptç¼–è¯‘é€šè¿‡
- âœ… Viteæ„å»ºæˆåŠŸ
- âœ… æ— è¯­æ³•é”™è¯¯
- âœ… ç±»å‹æ£€æŸ¥é€šè¿‡

### åŠŸèƒ½éªŒè¯
- âœ… è¡¨ç»“æ„åˆ›å»ºå’Œä¿®æ”¹åŠŸèƒ½æ­£å¸¸
- âœ… æ•°æ®æ’å…¥å’Œæ›´æ–°åŠŸèƒ½æ­£å¸¸  
- âœ… SQLæ‰§è¡ŒåŠŸèƒ½æ­£å¸¸
- âœ… æ•°æ®åº“æ¢å¤åŠŸèƒ½æ­£å¸¸

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

1. **æ·»åŠ æ‹¦æˆªå™¨** - åœ¨serviceå±‚æ·»åŠ è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
2. **ç¼“å­˜æœºåˆ¶** - å¯¹å¸¸ç”¨æ•°æ®æ·»åŠ ç¼“å­˜ç­–ç•¥
3. **æ‰¹é‡æ“ä½œ** - æ”¯æŒæ‰¹é‡æ•°æ®æ“ä½œAPI
4. **å®æ—¶é€šä¿¡** - é›†æˆWebSocketå®ç°å®æ—¶æ•°æ®æ›´æ–°
5. **å•å…ƒæµ‹è¯•** - ä¸ºDatabaseServiceæ·»åŠ å®Œæ•´çš„æµ‹è¯•è¦†ç›–

## ğŸ“ æ€»ç»“

æœ¬æ¬¡é‡æ„æˆåŠŸå°†Webç«¯æ‰€æœ‰APIè°ƒç”¨ç»Ÿä¸€åˆ°serviceå±‚ï¼Œæ˜¾è‘—æå‡äº†ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚æ‰€æœ‰ç»„ä»¶ç°åœ¨éƒ½ä½¿ç”¨ç»Ÿä¸€çš„DatabaseServiceè¿›è¡Œæ•°æ®æ“ä½œï¼Œé¿å…äº†é‡å¤çš„fetché€»è¾‘ï¼Œå¹¶ä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•å¥ å®šäº†è‰¯å¥½çš„åŸºç¡€ã€‚